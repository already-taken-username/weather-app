(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{10:function(e,t,a){e.exports=a(15)},15:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),s=a.n(r),c=(a(8),a(6)),o=a(1),l=a(2),u=a(5),h=a(3),m=a(4);function p(e){var t=document.getElementById("hueRange"),a=!1;if("boolean"===typeof e)if(e&&!t){var n=document.createElement("input");n.setAttribute("type","range"),n.setAttribute("min","0"),n.setAttribute("max","360"),n.setAttribute("value","198"),n.setAttribute("oninput","document.documentElement.style.setProperty('--weather-hue', this.value)"),n.setAttribute("id","hueRange"),document.getElementById("dayProgress").appendChild(n),a=198}else!e&&t&&t.remove();else"number"!==typeof e||t?void 0===e&&t&&(a=document.getElementById("hueRange").value):a=e;a&&(document.documentElement.style.setProperty("--weather-hue",a),document.querySelector("meta[name=theme-color]").setAttribute("content","hsl("+a+",20%,17%)"))}var d=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("label",{title:this.props.title},i.a.createElement("input",{onChange:this.props.action,type:"radio",name:this.props.name,value:this.props.value,defaultChecked:!!this.props.checked||null}),i.a.createElement("i",{className:this.props.icon}))}}]),t}(i.a.Component),f=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"bar"},Object.keys(this.props.categories).map((function(t){return!1!==e.props.categories[t].use?i.a.createElement("div",{key:e.props.categories[t].value},i.a.createElement(d,{action:e.props.action,title:e.props.categories[t].title,value:e.props.categories[t].value,name:e.props.date,icon:e.props.categories[t].icon,checked:e.props.selected===e.props.categories[t].value})):null})))}}]),t}(i.a.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={categories:{temperature:{class:"celsius",data:["main","temp"],round:!0,title:"Temperatura",value:"temperature",icon:"icon-temperature-0"},pressure:{class:"pascal",data:["main","pressure"],title:"Ci\u015bnienie",value:"pressure",icon:"icon-pressure-1"},cloud:{class:"percent",data:["clouds","all"],title:"Zachmurzenie",value:"cloud",icon:"icon-cloud"},rainfall:{class:"millimeter",data:["downfall","3h"],title:"Opady",value:"rainfall",icon:"icon-rain-2"},wind:{class:"metersperseconds",data:["wind","speed"],title:"Wiatr",value:"wind",icon:"icon-wind"},humidity:{class:"percent",data:["main","humidity"],title:"Wilgotno\u015b\u0107",value:"humidity",icon:"icon-humidity-outlined"},test:{class:"testClass",data:[],title:"Test",value:"test",icon:"icon-localization-1",use:!1}},selectedTab:"temperature"},a.selectTab=a.selectTab.bind(Object(c.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"selectTab",value:function(e){var t=e.target.value;this.setState((function(e,a){return{selectedTab:t}}))}},{key:"toLocaleShortTimeString",value:function(e){return new Date(e).toLocaleTimeString().slice(0,-3)}},{key:"render",value:function(){var e=this,t=this.state.categories[this.state.selectedTab],a=this.props.data;return i.a.createElement("div",{className:this.props.hide?"hideElement":null},i.a.createElement(f,{categories:this.state.categories,date:a.date,action:this.selectTab,selected:this.state.selectedTab}),i.a.createElement("div",{className:"timeline"},a.weather.map((function(a){return i.a.createElement("div",{key:a.dt,style:{order:a.dt}},a[t.data[0]][t.data[1]]?i.a.createElement("p",{className:"unit "+t.class},t.round?Math.round(a[t.data[0]][t.data[1]]):a[t.data[0]][t.data[1]]):i.a.createElement("p",null,"-"),i.a.createElement("i",null,i.a.createElement("img",{src:"img/weather/"+a.weather[0].icon+".png",alt:a.weather[0].main+" icon - "+a.weather[0].description})),i.a.createElement("b",null,e.toLocaleShortTimeString(a.dt_txt)))}))))}}]),t}(i.a.Component),v=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(u.a)(this,Object(h.a)(t).call(this,e));var n=new Date;return a.state={countdown:60,date:new Date,sunrise:new Date(1e3*a.props.sunrise-n.getTimezoneOffset()+a.props.timezone),sunset:new Date(1e3*a.props.sunset-n.getTimezoneOffset()+a.props.timezone)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.tick();var t=setInterval((function(){return e.tick()}),1e3);this.setState({timer:t})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"tick",value:function(){var e=new Date,t=1e3*(this.props.timezone+60*e.getTimezoneOffset());this.setState({date:new Date(e.getTime()+t),sunrise:new Date(1e3*this.props.sunrise+t),sunset:new Date(1e3*this.props.sunset+t)}),p(parseFloat((this.timeToPercent("date")/100*360).toFixed(3)))}},{key:"timeToPercent",value:function(e){return((60*(60*this.state[e].getHours()+this.state[e].getMinutes())+this.state[e].getSeconds())/86400*100).toFixed(3)}},{key:"render",value:function(){var e=60*this.state.sunrise.getHours()+this.state.sunrise.getMinutes()-(60*this.state.date.getHours()+this.state.date.getMinutes()),t=60*this.state.sunset.getHours()+this.state.sunset.getMinutes()-(60*this.state.date.getHours()+this.state.date.getMinutes());return i.a.createElement("div",null,i.a.createElement("h3",{title:"wsch\xf3d s\u0142o\u0144ca"},i.a.createElement("i",{className:"icon-horizon-sunrise"}),this.state.sunrise.toLocaleTimeString().slice(0,-3),e<=this.state.countdown&&e>0?i.a.createElement("span",null,"\u2022",i.a.createElement("b",{className:"unit minutes"},e)):null),i.a.createElement("h3",{title:"aktualny czas"},this.state.date.toLocaleTimeString().slice(0,-3)),i.a.createElement("h3",{title:"zach\xf3d s\u0142o\u0144ca"},t<=this.state.countdown&&t>0?i.a.createElement("span",null,i.a.createElement("b",{className:"unit minutes"},t),"\u2022"):null,this.state.sunset.toLocaleTimeString().slice(0,-3),i.a.createElement("i",{className:"icon-horizon-sunset"})),i.a.createElement("div",{className:"progress",id:"dayProgress"},i.a.createElement("div",{style:{width:this.timeToPercent("sunrise")+"%"}}),i.a.createElement("div",{style:{width:this.timeToPercent("sunset")+"%"}}),i.a.createElement("div",{style:{width:this.timeToPercent("date")+"%"}})))}}]),t}(i.a.Component);function g(e){switch(new Date(e).getDay()){case 1:return"Poniedzia\u0142ek";case 2:return"Wtorek";case 3:return"\u015aroda";case 4:return"Czwartek";case 5:return"Pi\u0105tek";case 6:return"Sobota";default:return"Niedziela"}}var b=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return void 0!==this.props.value?i.a.createElement("h3",null,this.props.rotate?i.a.createElement("i",{className:this.props.icon,style:{transform:"rotate("+this.props.rotate+"deg)"}}):i.a.createElement("i",{className:this.props.icon}),i.a.createElement("p",null,this.props.name,":"),i.a.createElement("span",{className:"unit "+this.props.unit},this.props.value)):null}}]),t}(i.a.Component),E=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;if("200"===String(e.cod)){var t=this.props.data,a=new Date(1e3*t.dt);return i.a.createElement("section",null,i.a.createElement("article",null,i.a.createElement("h2",null,t.name,", ",t.sys.country),i.a.createElement("label",null,i.a.createElement("input",{type:"button",onClick:this.props.toggleSection}),i.a.createElement("div",{className:"button",title:this.props.openLocalization?"zamknij opcje lokalizacji":"zmie\u0144 lokalizacje"},i.a.createElement("i",{className:"icon-localization-2"}))),i.a.createElement("h3",null,i.a.createElement("span",{title:g(1e3*t.dt)},g(1e3*t.dt).substr(0,3))," ",i.a.createElement("span",{title:"czas pobrania danych"},a.toLocaleTimeString().slice(0,-3)),", ",i.a.createElement("span",{title:t.weather[0].description},t.weather[0].main)),i.a.createElement("h1",{className:"unit celsius"},Math.round(t.main.temp)),i.a.createElement("i",null,i.a.createElement("img",{src:"img/weather/"+t.weather[0].icon+".png",alt:t.weather[0].main+" icon - "+t.weather[0].description})),i.a.createElement(v,{sunrise:t.sys.sunrise,sunset:t.sys.sunset,timezone:t.timezone})),i.a.createElement("article",null,i.a.createElement(b,{icon:"icon-arrow-outlined",name:"wiatr",value:t.wind.speed,rotate:t.wind.deg,unit:"metersperseconds"}),i.a.createElement(b,{icon:"icon-pressure-1",name:"ci\u015bnienie",value:t.main.pressure,unit:"pascal"}),i.a.createElement(b,{icon:"icon-humidity-outlined",name:"wIlGoTnO\u015b\u0106",value:t.main.humidity,unit:"percent"}),i.a.createElement(b,{icon:"icon-cloud",name:"ZACHMURZENIE",value:t.clouds.all,unit:"percent"}),i.a.createElement(b,{icon:"icon-visibility",name:"WiDoCzNo\u015a\u0107",value:t.visibility,unit:"meters"}),i.a.createElement(b,{icon:"icon-rain-2",name:"opady",value:function(){var e=(t.rain&&t.rain.h3?t.rain.h3:0)+(t.snow&&t.snow.h3?t.snow.h3:0);return e>0?e:void 0}(),unit:"millimeter"})))}return i.a.createElement("section",null,i.a.createElement("article",null,i.a.createElement("label",null,i.a.createElement("input",{type:"button",onClick:this.props.toggleSection}),i.a.createElement("div",{className:"button",title:this.props.openLocalization?"zamknij opcje lokalizacji":"zmie\u0144 lokalizacje"},i.a.createElement("i",{className:"icon-localization-2"})))),i.a.createElement(O,{error:e.message?e.message:null}))}}]),t}(i.a.Component),w=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"averageTemperature",value:function(){var e=this.props.data,t=0,a=0,n=0,i=0,r=new Date(1e3*e.city.sunrise),s=new Date(1e3*e.city.sunset);return e.weather.map((function(e){var c=new Date(1e3*e.dt);r.toLocaleTimeString().replace(/\:/g,"")<c.toLocaleTimeString().replace(/\:/g,"")&&c.toLocaleTimeString().replace(/\:/g,"")<s.toLocaleTimeString().replace(/\:/g,"")?(a+=e.main.temp,i++):(n++,t+=e.main.temp)})),(.9*a+.1*t)/(.1*n+.9*i)}},{key:"render",value:function(){var e=this.props.data;return i.a.createElement("li",{key:e.date,style:{order:e.date}},i.a.createElement("label",null,i.a.createElement("input",{type:"radio",onClick:this.props.action,name:"dailyForecast",value:e.date,checked:this.props.selected===e.date}),i.a.createElement("h3",null,i.a.createElement("span",null,g(1e3*e.weather[0].dt)),i.a.createElement("span",{className:"unit celsius"},Math.round(this.averageTemperature())))),i.a.createElement(y,{data:e,hide:this.props.selected!==e.date}))}}]),t}(i.a.Component),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={selectedForecast:""},a.selectDailyForecast=a.selectDailyForecast.bind(Object(c.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"selectDailyForecast",value:function(e){var t=this.state.selectedForecast===e.target.value?null:e.target.value;this.setState((function(e,a){return{selectedForecast:t}}))}},{key:"render",value:function(){var e=this,t=this.props.data;if("200"===String(t.cod)){var a=this.props.data.list,n=Object.keys(a),r=function(){var e=new Date,t=function(e){return(e=String(e)).length>=2?e:"0"+e};return e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())};return i.a.createElement("section",null,a[r()]?i.a.createElement("article",null,i.a.createElement("hr",null),i.a.createElement(y,{data:{date:r(),weather:a[r()]}})):i.a.createElement("article",null),i.a.createElement("article",null,i.a.createElement("ul",null,n.map((function(t){return r()!==t?i.a.createElement(w,{data:{city:e.props.data.city,weather:a[t],date:t},key:t,action:e.selectDailyForecast,selected:e.state.selectedForecast}):null})))))}return i.a.createElement(O,{error:t.message?t.message:null})}}]),t}(i.a.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={style:{display:"grid",gridAutoFlow:"column",gridGap:"24px",justifyContent:"center",alignItems:"center",padding:"24px",backgroundColor:"var(--weather-color-1)"}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:this.state.style},i.a.createElement("div",{className:"pending"},this.props.error?"!":null),!!this.props.error&&i.a.createElement("h3",null,this.props.error))}}]),t}(i.a.Component),k=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"loading"})}}]),t}(i.a.Component),z=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.properties;return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"button",value:e.id,onClick:e.action}),i.a.createElement("li",{className:"button"},i.a.createElement("span",null,e.name),i.a.createElement("span",null,e.country)))}}]),t}(i.a.Component),S=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={input:"",found:{},history:[],pending:!1},a.typeLocalization=a.typeLocalization.bind(Object(c.a)(a)),a.searchLocalization=a.searchLocalization.bind(Object(c.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"typeLocalization",value:function(e){var t=e.target.value;this.setState((function(e,a){return{input:t}}))}},{key:"searchLocalization",value:function(){var e=this,t=this.props.data.url+"weather?q="+this.state.input+"&appid="+this.props.data.api;this.setState((function(e,t){return{pending:!0}}),(function(){fetch(t).then((function(e){return e.json()})).then((function(t){if("200"===String(t.cod)){var a={name:t.name,country:t.sys.country,coord:t.coord,id:t.id,cod:200},n=[];n.push(a),e.state.history.map((function(e){e.id!==a.id&&n.push(e)})),e.setState((function(e,t){return{found:a,history:n,pending:!1}}))}else e.setState((function(t,a){return{found:{cod:404,input:e.state.input},pending:!1}}))})).catch((function(e){console.log(e)}))}))}},{key:"render",value:function(){var e=this;return i.a.createElement("section",{id:"localization",className:this.props.open?null:"hideElement"},i.a.createElement("article",null,i.a.createElement("label",null,i.a.createElement("i",{className:"icon-search"}),i.a.createElement("input",{type:"text",onChange:this.typeLocalization,disabled:this.state.pending,autoFocus:!0})),i.a.createElement("hr",null),i.a.createElement("label",null,i.a.createElement("input",{type:"button",onClick:this.props.callByLocalization,disabled:this.state.pending}),i.a.createElement("div",{className:"button",title:"u\u017cyj autolokalizacji"},i.a.createElement("i",{className:"icon-localization-1"})))),i.a.createElement("article",null,i.a.createElement("ul",null,i.a.createElement("p",{className:this.state.input.length<3?"hideElement":null},i.a.createElement("label",null,i.a.createElement("input",{type:"submit",onClick:this.searchLocalization,disabled:this.state.pending}),i.a.createElement("li",{className:"button"},i.a.createElement("i",{className:"icon-search"})," Szukaj")),this.state.pending?i.a.createElement("li",null," ",i.a.createElement(k,null)," "):200===this.state.found.cod?i.a.createElement(z,{properties:{name:this.state.found.name,country:this.state.found.country,id:this.state.found.id,action:this.props.callByCityId}}):i.a.createElement("li",{className:404===this.state.found.cod?null:"hideElement"},i.a.createElement("i",null,"Nie znaleziono"))),i.a.createElement("p",{className:Object.keys(this.state.history).length>1?null:"hideElement"},i.a.createElement("li",null,i.a.createElement("i",null,"Ostatnio wyszukiwane:")),Object.keys(this.state.history).map((function(t){return i.a.createElement(z,{properties:{name:e.state.history[t].name,country:e.state.history[t].country,id:e.state.history[t].id,action:e.props.callByCityId}})}))))))}}]),t}(i.a.Component),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={fetch:{api:"5d33aafbe7cc14271bd32d9c75a32377",units:"metric",lang:"pl",url:"http://api.openweathermap.org/data/2.5/",city:"7532248",position:{lat:"51",lon:"16"},useLocalization:!1},openLocalizationSection:!1,interval:{active:!0,interval:27e5},data:{weather:{cod:"404"},forecast:{cod:"404"}},color:!1},a.toggleLocalizationSection=a.toggleLocalizationSection.bind(Object(c.a)(a)),a.callByLocalization=a.callByLocalization.bind(Object(c.a)(a)),a.callByCityId=a.callByCityId.bind(Object(c.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.fetchForecast(),this.fetchWeather(),this.state.interval.active){var t=setInterval((function(){return e.refresh()}),this.state.interval.interval);this.setState({timer:t})}}},{key:"componentWillUnmount",value:function(){this.state.timer&&clearInterval(this.state.timer)}},{key:"refresh",value:function(){this.fetchForecast(),this.fetchWeather()}},{key:"toggleLocalizationSection",value:function(){var e=this;this.setState((function(t,a){return{openLocalizationSection:!e.state.openLocalizationSection}}))}},{key:"fetchData",value:function(e){var t=this.state.fetch.url+e+(this.state.fetch.useLocalization?"?lat="+this.state.fetch.position.lat+"&lon="+this.state.fetch.position.lon:"?id="+this.state.fetch.city)+"&appid="+this.state.fetch.api+"&units="+this.state.fetch.units+"&lang="+this.state.fetch.lang;return new Promise((function(e,a){fetch(t).then((function(e){return e.json()})).then((function(t){e(t)})).catch((function(e){a(404)}))}))}},{key:"callByCityId",value:function(e){var t=this,a=e.target.value;this.setState((function(e,n){var i=t.state.fetch;return{openLocalizationSection:!1,fetch:{useLocalization:!1,position:{lat:i.position.lat,lon:i.position.lon},api:i.api,units:i.units,url:i.url,query:i.query,city:a,lang:i.lang}}}),(function(){t.fetchWeather(),t.fetchForecast()}))}},{key:"callByLocalization",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var a=e.state.fetch;e.setState((function(e,n){return{openLocalizationSection:!1,fetch:{useLocalization:!0,position:{lat:t.coords.latitude,lon:t.coords.longitude},api:a.api,units:a.units,url:a.url,query:a.query,city:a.city,lang:a.lang}}}),(function(){e.fetchWeather(),e.fetchForecast()}))}),(function(e){alert(e.message),console.log(e)})):(alert("Your browser is not supported."),console.log("Geolocation is not supported by this browser."))}},{key:"fetchWeather",value:function(){var e=this;this.fetchData("weather").then((function(t){"200"===String(t.cod)?e.setState((function(a,n){return{data:{weather:t,forecast:e.state.data.forecast}}})):e.setState((function(a,n){return{data:{weather:{cod:t.cod?String(t.cod):"404",message:t.message?t.message:"b\u0142\u0105d \u0142\u0105czenia z serwerem"},forecast:e.state.data.forecast}}}))}))}},{key:"fetchForecast",value:function(){var e=this;this.fetchData("forecast").then((function(t){if("200"===String(t.cod)){t.list.map((function(e,a){var n=(e.rain?e.rain["3h"]:0)+(e.snow?e.snow["3h"]:0);t.list[a].downfall={"3h":n>0?n:null}}));var a=(n="dt_txt",function(e){return e.reduce((function(e,t){var a=t[n].split(" ")[0].replace(/-/g,"");return e[a]=(e[a]||[]).concat(t),e}),{})});t.list=a(t.list),e.setState((function(a,n){return{data:{weather:e.state.data.weather,forecast:t}}}))}else e.setState((function(a,n){return{data:{weather:e.state.data.weather,forecast:{cod:t.cod?String(t.cod):"404",message:t.message?t.message:"b\u0142\u0105d \u0142\u0105czenia z serwerem"}}}}));var n}))}},{key:"setColor",value:function(){var e=this;this.setState((function(t,a){return{color:!e.state.color}}),(function(){p(e.state.color)}))}},{key:"render",value:function(){var e=this;return i.a.createElement("main",{id:"app"},i.a.createElement(S,{open:this.state.openLocalizationSection,callByLocalization:this.callByLocalization,callByCityId:this.callByCityId,data:this.state.fetch}),i.a.createElement(E,{data:this.state.data.weather,toggleSection:this.toggleLocalizationSection,openLocalization:this.state.openLocalizationSection}),i.a.createElement(j,{data:this.state.data.forecast}),i.a.createElement("footer",null,i.a.createElement("i",null,"Powered by ",i.a.createElement("a",{href:"https://openweathermap.org",rel:"nofollow license noopener noreferrer",target:"_blank"},"OpenWeatherMap.org"),i.a.createElement("b",{onClick:function(){e.setColor()}},"."))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){}},[[10,1,2]]]);
//# sourceMappingURL=main.526d8669.chunk.js.map